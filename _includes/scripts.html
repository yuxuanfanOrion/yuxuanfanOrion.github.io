<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="{{ base_path }}/assets/js/main.min.js"></script>

<!-- Back to Top Button -->
<script>
$(document).ready(function() {
  // Create back-to-top button
  $('body').append('<a href="#" class="back-to-top">Top</a>');

  // Show/hide button based on scroll position
  $(window).scroll(function() {
    if ($(this).scrollTop() > 200) {
      $('.back-to-top').fadeIn();
    } else {
      $('.back-to-top').fadeOut();
    }
  });

  // Smooth scroll to top
  $('.back-to-top').click(function(e) {
    e.preventDefault();
    $('html, body').animate({scrollTop: 0}, 500);
  });
});
</script>

<!-- Star Background Rotation -->
<script>
$(document).ready(function() {
  var starImages = [
    '/images/stars-bg/star-01.jpg',
    '/images/stars-bg/star-02.jpg',
    '/images/stars-bg/star-03.jpg',
    '/images/stars-bg/star-04.jpg',
    '/images/stars-bg/star-05.jpg',
    '/images/stars-bg/star-06.jpg',
    '/images/stars-bg/star-07.jpg',
    '/images/stars-bg/star-08.jpg',
    '/images/stars-bg/star-09.jpg',
    '/images/stars-bg/star-10.jpg',
    '/images/stars-bg/star-11.jpg',
    '/images/stars-bg/star-12.jpg',
    '/images/stars-bg/star-13.jpg',
    '/images/stars-bg/star-14.jpg',
    '/images/stars-bg/star-15.jpg',
    '/images/stars-bg/star-16.jpg',
    '/images/stars-bg/star-17.jpg',
    '/images/stars-bg/star-18.jpg',
    '/images/stars-bg/star-19.jpg',
    '/images/stars-bg/star-20.jpg'
  ];

  var currentIndex = 0;
  var layer1 = $('#bg-layer-1');
  var layer2 = $('#bg-layer-2');

  if (layer1.length && layer2.length) {
    // 初始化：layer1 显示第一张图片
    layer1.css({
      'background-image': 'url(' + starImages[0] + ')',
      'opacity': 1
    });
    layer2.css({
      'background-image': 'url(' + starImages[1] + ')',
      'opacity': 0
    });

    var showingLayer1 = true;

    setInterval(function() {
      currentIndex = (currentIndex + 1) % starImages.length;
      var nextIndex = (currentIndex + 1) % starImages.length;

      if (showingLayer1) {
        layer2.css('background-image', 'url(' + starImages[currentIndex] + ')');
        layer1.css('opacity', 0);
        layer2.css('opacity', 1);
        setTimeout(function() {
          layer1.css('background-image', 'url(' + starImages[nextIndex] + ')');
        }, 1000);
      } else {
        layer1.css('background-image', 'url(' + starImages[currentIndex] + ')');
        layer2.css('opacity', 0);
        layer1.css('opacity', 1);
        setTimeout(function() {
          layer2.css('background-image', 'url(' + starImages[nextIndex] + ')');
        }, 1000);
      }
      showingLayer1 = !showingLayer1;
    }, 5000);
  }
});
</script>

{% include analytics.html %}
