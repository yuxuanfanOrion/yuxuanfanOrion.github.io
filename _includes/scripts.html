<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="{{ base_path }}/assets/js/main.min.js"></script>

<!-- Back to Top Button -->
<script>
$(document).ready(function() {
  // Create back-to-top button
  $('body').append('<a href="#" class="back-to-top">Top</a>');

  // Show/hide button based on scroll position
  $(window).scroll(function() {
    if ($(this).scrollTop() > 200) {
      $('.back-to-top').fadeIn();
    } else {
      $('.back-to-top').fadeOut();
    }
  });

  // Smooth scroll to top
  $('.back-to-top').click(function(e) {
    e.preventDefault();
    $('html, body').animate({scrollTop: 0}, 500);
  });
});
</script>

<!-- Star Background Rotation -->
<script>
$(document).ready(function() {
  // Auto-detect star images using Jekyll
  var starImages = [
    {% assign star_files = site.static_files | where_exp: "file", "file.path contains '/images/stars-bg/'" %}
    {% for file in star_files %}
    '{{ file.path }}'{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  if (starImages.length === 0) return;

  var currentIndex = 0;
  var cover = $('#profile-cover');

  if (cover.length) {
    cover.append('<div class="bg-layer bg-layer-1"></div>');
    cover.append('<div class="bg-layer bg-layer-2"></div>');

    var layer1 = cover.find('.bg-layer-1');
    var layer2 = cover.find('.bg-layer-2');
    var activeLayer = layer1;
    var inactiveLayer = layer2;

    layer1.css('background-image', 'url(' + starImages[0] + ')');
    layer1.css('opacity', 1);
    layer2.css('opacity', 0);

    setInterval(function() {
      currentIndex = (currentIndex + 1) % starImages.length;
      inactiveLayer.css('background-image', 'url(' + starImages[currentIndex] + ')');
      activeLayer.animate({opacity: 0}, 1500);
      inactiveLayer.animate({opacity: 1}, 1500);

      var temp = activeLayer;
      activeLayer = inactiveLayer;
      inactiveLayer = temp;
    }, 10000);
  }
});
</script>

{% include analytics.html %}
